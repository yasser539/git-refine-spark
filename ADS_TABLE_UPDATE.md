# ุชุญุฏูุซ ุฌุฏูู ุงูุฅุนูุงูุงุช - Ads Table Update

## ๐ ููุฎุต ุงูุชุญุฏูุซุงุช

ุชู ุชุญุฏูุซ ุฌุฏูู `ads` ูู Supabase ููุฏุนู ุฅุฏุงุฑุฉ Storage ุจุดูู ุฃูุถู ูุน ุงูุญููู ุงูุฌุฏูุฏุฉ.

## ๐ ุงูุชุบููุฑุงุช ุงููุทุจูุฉ

### 1. ุชุญุฏูุซ ูุฎุทุท ุงูุฌุฏูู

**ุงูุญููู ุงูุฌุฏูุฏุฉ:**
- `storage_bucket` (TEXT DEFAULT 'img') - ุงุณู ุงูุจูุช ูู Storage
- `storage_path` (TEXT) - ุงููุณุงุฑ ุงููุงูู ููุตูุฑุฉ ุฏุงุฎู ุงูุจูุช

**ุงูุญููู ุงูููุฌูุฏุฉ:**
- `id` (UUID) - ุฑูู ุชุนุฑููู ูุฑูุฏ
- `image_url` (TEXT) - ุฑุงุจุท ุงูุตูุฑุฉ ุงูุนุงูุฉ
- `created_at` (TIMESTAMP) - ุชุงุฑูุฎ ุงูุฅูุดุงุก

### 2. ุชุญุฏูุซ TypeScript Interfaces

```typescript
export interface Ad {
  id: string
  image_url: string
  storage_bucket: string
  storage_path?: string
  created_at: string
}
```

### 3. ุชุญุฏูุซ ุฎุฏูุงุช ุงูุฅุนูุงูุงุช

**ุงูุฎุฏูุงุช ุงูุฌุฏูุฏุฉ:**
- `uploadAdImage(file: File, fileName: string)` - ุฑูุน ุตูุฑุฉ ุฅูู Storage
- `deleteAdImage(storagePath: string)` - ุญุฐู ุตูุฑุฉ ูู Storage

**ุงูุฎุฏูุงุช ุงููุญุฏุซุฉ:**
- `createAd()` - ูุฏุนู ุงูุขู `storage_path` ู `storage_bucket`
- `updateAd()` - ูุญุฏุซ ููุนูู ูุน ุงูุญููู ุงูุฌุฏูุฏุฉ
- `deleteAd()` - ูุญุฐู ุงูุตูุฑุฉ ูู Storage ุฃูุถุงู

### 4. ุชุญุฏูุซ ูุงุฌูุฉ ุงููุณุชุฎุฏู

**ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:**
- ุฑูุน ุงูุตูุฑ ูุจุงุดุฑุฉ ุฅูู Supabase Storage
- ุญุฐู ุงูุตูุฑ ูู Storage ุนูุฏ ุญุฐู ุงูุฅุนูุงู
- ุฅุฏุงุฑุฉ ุฃูุถู ูููููุงุช ูุงููุณุงุฑุงุช

## ๐ ููููุฉ ุงูุชุทุจูู

### 1. ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช

ูู ุจุชูููุฐ ููู `updated_ads_table.sql` ูู Supabase SQL Editor:

```sql
-- ุชุญุฏูุซ ุงูุฌุฏูู ุงูููุฌูุฏ
ALTER TABLE ads 
ADD COLUMN IF NOT EXISTS storage_bucket TEXT DEFAULT 'img',
ADD COLUMN IF NOT EXISTS storage_path TEXT;

-- ุฅุถุงูุฉ ุงูููุงุฑุณ
CREATE INDEX IF NOT EXISTS idx_ads_storage_bucket ON ads(storage_bucket);
```

### 2. ุฅุนุฏุงุฏ Storage Bucket

ุชุฃูุฏ ูู ูุฌูุฏ bucket ุจุงุณู `img` ูู Supabase Storage:

1. ุงุฐูุจ ุฅูู Supabase Dashboard
2. ุงูุชูู ุฅูู Storage
3. ุฃูุดุฆ bucket ุจุงุณู `img` ุฅุฐุง ูู ููู ููุฌูุฏุงู
4. ุงุถุจุท ุงูุณูุงุณุงุช ุงูููุงุณุจุฉ ูููุตูู ุงูุนุงู

### 3. ุงุฎุชุจุงุฑ ุงูููุฒุงุช

1. **ุฑูุน ุตูุฑุฉ ุฌุฏูุฏุฉ:**
   - ุงุฐูุจ ุฅูู ุตูุญุฉ "ุงูุฅุนูุงูุงุช ูุงูุฅุดุนุงุฑุงุช"
   - ุงุถุบุท "ุฅุถุงูุฉ ุฅุนูุงู ุฌุฏูุฏ"
   - ุงุฎุชุฑ ุตูุฑุฉ
   - ุณุชุชู ุฑูุน ุงูุตูุฑุฉ ุชููุงุฆูุงู ุฅูู Storage

2. **ุญุฐู ุฅุนูุงู:**
   - ุงุถุบุท ุนูู ุฃููููุฉ ุงูุญุฐู
   - ุณุชุชู ุฅุฒุงูุฉ ุงูุตูุฑุฉ ูู Storage ุชููุงุฆูุงู

## ๐ง ุงููููุงุช ุงููุญุฏุซุฉ

1. **`src/lib/supabase.ts`** - ุชุญุฏูุซ interface
2. **`src/lib/supabase-services.ts`** - ุฅุถุงูุฉ ุฎุฏูุงุช Storage
3. **`src/app/notifications/page.tsx`** - ุชุญุฏูุซ ูุงุฌูุฉ ุงููุณุชุฎุฏู
4. **`updated_ads_table.sql`** - ูุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุญุฏุซ

## ๐ ุงูููุงุฆุฏ

### โ ุชุญุณููุงุช ุงูุฃุฏุงุก
- ุชุฎุฒูู ููุธู ููุตูุฑ
- ุฅุฏุงุฑุฉ ุฃูุถู ูููุณุงุญุฉ
- ููุงุฑุณ ูุญุณูุฉ ููุจุญุซ

### โ ุฃูุงู ูุญุณู
- ูุตู ุงูุจูุงูุงุช ุนู ุงููููุงุช
- ุชุญูู ุฃูุถู ูู ุงููุตูู
- ุญุฐู ุขูู ูููููุงุช

### โ ูุงุจููุฉ ุงูุชูุณุน
- ุฏุนู ุฃููุงุน ูููุงุช ูุชุนุฏุฏุฉ
- ุฅุฏุงุฑุฉ ุจูุชุงุช ูุชุนุฏุฏุฉ
- ุชูุธูู ุฃูุถู ูููุญุชูู

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดููุฉ: ูุง ูููู ุฑูุน ุงูุตูุฑ
**ุงูุญู:**
1. ุชุญูู ูู ูุฌูุฏ bucket `img`
2. ุชุญูู ูู ุณูุงุณุงุช Storage
3. ุชุฃูุฏ ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู

### ูุดููุฉ: ุงูุตูุฑ ูุง ุชุธูุฑ
**ุงูุญู:**
1. ุชุญูู ูู `image_url` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. ุชุฃูุฏ ูู ุฃู ุงูุฑุงุจุท ุตุญูุญ
3. ุชุญูู ูู ุฅุนุฏุงุฏุงุช CORS

### ูุดููุฉ: ุญุฐู ุงูุฅุนูุงู ูุง ูุญุฐู ุงูุตูุฑุฉ
**ุงูุญู:**
1. ุชุญูู ูู ูุฌูุฏ `storage_path`
2. ุชุฃูุฏ ูู ุตูุงุญูุงุช ุญุฐู ุงููููุงุช
3. ุชุญูู ูู ุณุฌูุงุช ุงูุฃุฎุทุงุก

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ:** ุงูุฅุนูุงูุงุช ุงูููุฌูุฏุฉ ุณุชุญุชูุธ ุจู `image_url` ููุท
2. **ุงูุชูุงูู:** ุงูููุฏ ูุชูุงูู ูุน ุงูุฅุนูุงูุงุช ุงููุฏููุฉ ูุงูุฌุฏูุฏุฉ
3. **ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ:** ุงุญุชูุธ ุจูุณุฎุฉ ุงุญุชูุงุทูุฉ ูุจู ุงูุชุญุฏูุซ
4. **ุงูุงุฎุชุจุงุฑ:** ุงุฎุชุจุฑ ุงูููุฒุงุช ูู ุจูุฆุฉ ุงูุชุทููุฑ ุฃููุงู

---

**ุชุงุฑูุฎ ุงูุชุญุฏูุซ:** $(date)
**ุงูุฅุตุฏุงุฑ:** 2.0.0 